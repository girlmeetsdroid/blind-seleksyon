<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Blind Seleksyon</title>


	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="stylesheet" href="reveal/css/reveal.css">
	<link rel="stylesheet" href="reveal/css/theme/beige.css" id="theme">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="reveal/lib/css/zenburn.css">
	<link href='https://fonts.googleapis.com/css?family=Merriweather:400,700,900' rel='stylesheet' type='text/css'>
		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->

		<style type="text/css">

			table.dataTable tbody tr, table.dataTable tbody tr {
				background-color: rgba(255, 255, 255, 0.4) !important;
			}

			table.dataTable tbody tr:hover, table.dataTable tbody tr:hover {
				background-color: rgba(86, 148, 146, 0.2) !important;
			}

			tr {
				margin: 5px 0px 5px 0px;
			}


			.question,.answer {
				font-size: 1em;
				word-break: break-all;
				word-wrap: break-word;
			}

			table.dataTable tbody th, table.dataTable tbody td {
				border-bottom-width: 0;
				word-wrap: break-word;
				word-break: break-all;
			}

			.reveal table th, .reveal table td{
				word-break: break-all !important;
				font-size: 0.5em !important;
			}

			.data-table{
				word-break: break-all;
				table-layout: fixed;
				word-wrap: break-word;
				margin: 0 auto;
				clear: both;
				width: 100%;
				table-layout: fixed;
			}

			span.yes, span.no, span.no-clear-stand {
				float:left;
				padding:10px;
				margin-right: 10px;
				color: #13140F;
			}

			span.no {
				background-color: #F23C55;
				color:#fff;
			}

			span.yes {
				background-color: #D4FF00;
			}

			.answer > p {
				margin:0;
				padding:6px;
				margin-top: 5px;
				margin-bottom: 5px;
				word-wrap: break-word;
				word-break: keep-all;
				cursor: move;
				display: block;
				-webkit-touch-callout: none; /* iOS Safari */
				-webkit-user-select: none;   /* Chrome/Safari/Opera */
				-khtml-user-select: none;    /* Konqueror */
				-moz-user-select: none;      /* Firefox */
				-ms-user-select: none;       /* IE/Edge */
			}

			.answer  > p::first-letter {
				font-size: 160%;
				color: #569492;
				font-family: serif;
			}

		</style>

		<!-- ================== BEGIN PAGE LEVEL STYLE ================== -->
		<link href="assets/plugins/DataTables2/datatables.css" rel="stylesheet" />
		<link href="assets/plugins/DataTables2/DataTables-1.10.11/css/jquery.dataTables.min.css" rel="stylesheet" />
		<link href="assets/plugins/DataTables2/RowReorder-1.1.1/css/rowReorder.dataTables.min.css" rel="stylesheet" />
		<!-- ================== END PAGE LEVEL STYLE ================== -->

		<!-- ================== BEGIN BASE JS ================== -->
		<script src="assets/plugins/pace/pace.min.js"></script>
		<!-- ================== END BASE JS ================== -->
		<script type="text/javascript" src="data.js"></script>
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-background="img/blind_justice.jpg">
					<h1><strong>Blind</strong> Seleksyon</h1>
					<h3>Who would you elect as president<br/> if personalities weren't the issue?</h3>
					<p>
						<small>Created for the #BilangPilipino Hackathon</small>
					</p>
				</section>

				<section>
					<h3>Elections are often skewed<br/> by <strong>cults of personality</strong></h3>
					<p>
						This is a poll application that aims help you make better decisions by masking out potential biases.
					</p>
					<p>
						<br/>


					</p>
				</section>

				<!-- Example of nested vertical slides -->
				<section id="simula" data-transition="zoom">
					<section>
						<h2>Before you start, who are <em>you</em> most likely to vote for?</h2>

						<table id="voting-for">
							<tr>
								<td>
									<a id="binay" href="#/3"><img src="img/01.jpg" /></a>
								</td>
								<td>
									<a id="santiago" href="#/3"><img src="img/02.jpg" /></a>
								</td>
								<td>
									<a id="duterte" href="#/3"><img src="img/03.jpg" /></a>
								</td>
								<td>
									<a id="poe" href="#/3"><img src="img/04.jpg" /></a>
								</td>
								<td>
									<a id="roxas" href="#/3"><img src="img/05.jpg" /></a>
								</td>
							</tr>
						</table>
						<br>
						<p>
							<small>This won't factor in computing your results in any way.</small>
						</p>

					</section>

				</section>

				<section>

					<p>
						<small>				“If most of us are ashamed of shabby clothes and shoddy furniture,<br/> let us be more ashamed of shabby ideas and shoddy philosophies.”
							<br/><br/>
							<em> - Albert Einstein </em>
						</small>
					</p>
				</section>

				<section data-state="customevent" data-transition="zoom">
					<h2>State Events (FOR MARV)</h2>
					<p>
						Additionally custom events can be triggered on a per slide basis by binding to the <code>data-state</code> name.
					</p>
					<pre><code class="javascript" data-trim contenteditable style="font-size: 18px;">
						Reveal.addEventListener( 'customevent', function() {
						console.log( '"customevent" has fired' );
					} );
					</code></pre>
				</section>

				<section data-state="resultEvent">
					<h2>Your Results</h2>
					<p>
						How did you stack up?
					</p>
					<canvas id="memecanvas" style="border:1px solid black" width="640" height="360">
	            		Sorry, canvas not supported
	            	</canvas>
	            	<br>
				</section>

				<section style="text-align: left;">
					<h1>THE END</h1>
					<p>

					</p>
				</section>

			</div>

		</div>

		<script src="reveal/lib/js/head.min.js"></script>
		<script src="reveal/js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
				{ src: 'reveal/lib/js/classList.js', condition: function() { return !document.body.classList; } },
				{ src: 'reveal/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: 'reveal/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: 'reveal/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
				{ src: 'reveal/plugin/zoom-js/zoom.js', async: true },
				{ src: 'reveal/plugin/notes/notes.js', async: true }
				]
			});

			function saveToLocalStorage (key, value) {
				window.localStorage.setItem(key, value);
			}

			function getUserVotingFor (key) {
				return window.localStorage[key];
			}

		</script>


		<!-- ================== BEGIN BASE JS ================== -->
		<script src="assets/plugins/jquery/jquery-1.9.1.min.js"></script>
		<script src="assets/plugins/jquery/jquery-migrate-1.1.0.min.js"></script>
		<script type="text/javascript">
			$("#voting-for a").click(function() {
				var votingFor = $(this).attr('id');
				saveToLocalStorage("votingFor", votingFor);
			});

			var reversedData = data.reverse();
			$.each(reversedData, function (index, value) {
				var sectionHtml = "<section id='kwestyon"+ value.id +"' data-transition='zoom'>";
				var sectionItem = "<h2>"+ value.issue +"</h2><p><small>Drag and drop to order the results from most favourable to least</small></p>"
				sectionHtml += sectionItem + "</section>";

				$("section#simula").after(sectionHtml);

				var sectionAnswer = "<section id='sagot"+ value.id +"' data-transition='zoom'>";
				var sectionAnswerItem = "<h5>"+ value.shortname +"</h5><small><em> &#8593; Best Answer </em></small>"
				+ "<table id='data-table"+ value.id +"' class='table table-striped table-bordered data-table' width='100%'></table><small><em> &#8595; Worst Answer </em></small>";
				sectionAnswer += sectionAnswerItem + "</section>";
				$("section#kwestyon"+ value.id).after(sectionAnswer);

				var inHTML = "<thead><tr><th>Order</th><th></th><th></th></tr></thead>";
				$.each(value.answers, function(index, val){
					if (val.summary) {
						var newItem = "<tr class='"+ val.candidate_id +"' id='"+value.id + "-" +val.candidate_id +"'>"+
							"<td>" + index +"</td>" + "<td>" + val.candidate_id +"</td>" +
							"<td class='answer'><p><span class='"+val.summary.toLowerCase() +"'>"+val.summary +"</span>"+ val.quote + "</p></td>"
						 +"</tr>"
						inHTML += newItem;
					}
				});
				inHTML += "</tbody>";
				$("table#data-table"+ value.id).html(inHTML);
			});
		</script>
		<script src="assets/plugins/jquery-ui/ui/minified/jquery-ui.min.js"></script>
		<script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
		<!--[if lt IE 9]>
		<script src="assets/crossbrowserjs/html5shiv.js"></script>
		<script src="assets/crossbrowserjs/respond.min.js"></script>
		<script src="assets/crossbrowserjs/excanvas.min.js"></script>
		<![endif]-->
		<!-- ================== END BASE JS ================== -->

		<!-- ================== BEGIN PAGE LEVEL JS ================== -->
		<script src="assets/plugins/DataTables2/DataTables-1.10.11/js/jquery.dataTables.min.js"></script>
		<script src="assets/plugins/DataTables2/RowReorder-1.1.1/js/dataTables.rowReorder.min.js"></script>
		<script src="assets/js/table-manage-rowreorder.demo.js"></script>
		<!-- ================== END PAGE LEVEL JS ================== -->

		<script>
			$(document).ready(function() {
				TableManageRowReorder.init();
			});


			var canvas = document.getElementById('memecanvas');
			ctx = canvas.getContext('2d');
			var deviceWidth = window.innerWidth;;
		    // canvasWidth = Math.min(640, deviceWidth-20);
		    // canvasHeight = Math.min(360, deviceWidth-20);
		    // canvas.width = canvasWidth;
		    // canvas.height = canvasHeight;

		    function loadImages(sources, callback) {
		    	var images = {};
		    	var loadedImages = 0;
		    	var numImages = 0;
		        // get num of sources
		        for(var src in sources) {
		        	numImages++;
		        }
		        for(var src in sources) {
		        	images[src] = new Image();
		        	images[src].onload = function() {
		        		if(++loadedImages >= numImages) {
		        			callback(images);
		        		}
		        	};
		        	images[src].src = sources[src];
		        }
		    }

		    function loadResultPhoto() {
			    var chosenCandidate = getUserVotingFor('votingFor');
			    // var chosenCandidate = window.localStorage['votingFor'];
			    var candidateMap = {
			    	"binay": "Jejomar Binay",
			    	"santiago": "Miriam Santiago",
			    	"duterte": "Rodrigo Duterte",
			    	"poe": "Grace Poe",
			    	"roxas": "Mar Roxas"
			    };

			    // alert("map: " + candidateMap[chosenCandidate]);

			    var sources = {
			    	bg: 'img/result_bg.jpg',
			        topCandidate: 'img/santiago.png',
			        chosenCandidate: 'img/' + chosenCandidate + '.png'
			     };

			     var chosenCandidate = {
			     	name: candidateMap[chosenCandidate],
			        compatibility: "51%"
			    };

			    loadImages(sources, function(images) {
			     	var img = images.bg;
			     	x = canvas.width/2 - img.width/2;
			     	y = canvas.height/2 - img.height/2;
			    	ctx.beginPath();
			        ctx.drawImage(images.bg, 0, 0, images.bg.width, images.bg.height,    // source rectangle
	                			0, 0, canvas.width, canvas.height);
			        ctx.closePath();

			        /**
			        * Insert Top Blind Candidate stats
			  		*/
			        img = images.topCandidate;
			        imgSize = 200;
			     	x = 50;
			     	y = (canvas.height - imgSize) / 2;
			     	ctx.lineWidth  = 15;
		            ctx.strokeStyle = 'white';
		            ctx.beginPath();
		            ctx.arc(imgSize -50, imgSize + 10, 100, 0, 2 * Math.PI, false);
					ctx.stroke();
					ctx.closePath();
			        ctx.drawImage(images.topCandidate, x, y + 30, imgSize, imgSize);

			        // text attributes
			        ctx.lineWidth  = 5;
		            ctx.strokeStyle = '#4f3928';
		            ctx.fillStyle = '#FAF8A1';
		            ctx.shadowColor= '#4f3928';
		            ctx.shadowOffsetX="2";
		            ctx.shadowOffsetY="2";
					ctx.font = '10pt Lato'

					// on top of image
					topTextPosX = x;
					topTextPosY = imgSize/2 - (16 * 2.5);

					// beside image
					// topTextPosX = x + imgSize + 10;
					// topTextPosY = y + imgSize/2;

					// Insert Text Stats
					var topTextTitle = 'Your Top Blind Match is';
					ctx.fillText(topTextTitle, topTextPosX, topTextPosY);

					var topTextOffset = 16 *2;
					ctx.font = 'normal bold 16pt Merriweather';
					var topCandidateName = 'Miriam Santiago';
					ctx.fillText(topCandidateName, topTextPosX, topTextPosY + topTextOffset);

					// topTextOffset += 18
					var metrics = ctx.measureText(topCandidateName);
					ctx.font = 'normal bold 16pt Merriweather'
					// console.log("metrics", metrics);
					var topCandidatePercentage = '98%';
		            ctx.fillText(topCandidatePercentage, topTextPosX + metrics.width + 15, topTextPosY + topTextOffset);

		            /**
			        * Insert Chosen Candidate stats
			  		*/
			  		ctx.shadowOffsetX="0";
		            ctx.shadowOffsetY="0";
			  		img = images.chosenCandidate;
			        imgSize = 200;
			     	x = canvas.width - imgSize - 50;
			     	y = (canvas.height - imgSize) / 2;

			        ctx.lineWidth  = 15;
		            ctx.strokeStyle = 'white';
		            ctx.beginPath();
		            ctx.arc(x + 100, imgSize + 10, 100, 0, 2 * Math.PI, false);
					ctx.stroke();
					ctx.closePath();
					ctx.drawImage(images.chosenCandidate, x, y + 30, imgSize, imgSize);

			        ctx.lineWidth  = 5;
		            ctx.strokeStyle = '#F4D1B1';
		            ctx.fillStyle = '#A13679';
		            ctx.shadowColor="#F4D1B1";
		            ctx.shadowOffsetX="2";
		            ctx.shadowOffsetY="2";
					ctx.font = '10pt Lato'

					// on top of image
					topTextPosX = x;
					topTextPosY = imgSize/2 - (16 * 2.5);

					// beside image
					// topTextPosX = x + imgSize + 10;
					// topTextPosY = y + imgSize/2;

					topTextTitle = 'Compatibility with Chosen Candidate';
					ctx.fillText(topTextTitle, topTextPosX, topTextPosY);

					topTextOffset = 16 *2;
					ctx.font = 'normal bold 16pt Merriweather';
					topCandidateName = chosenCandidate.name;
					ctx.fillText(topCandidateName, topTextPosX, topTextPosY + topTextOffset);

					// topTextOffset += 18
					var metrics = ctx.measureText(topCandidateName);
					ctx.font = 'normal bold 16pt Merriweather';
		            ctx.fillText(chosenCandidate.compatibility, topTextPosX + metrics.width + 15, topTextPosY + topTextOffset);
			      });
			}

			Reveal.addEventListener( 'resultEvent', function() {
				loadResultPhoto();
			} );

		</script>

	</body>
	</html>
